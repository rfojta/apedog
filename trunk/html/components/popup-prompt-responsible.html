<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script>
            function validateInputs(){
                freeColumnInputs = document.getElementsByClassName("free");
                if(checkField(freeColumnInputs)==false){
                    return false;
                } else {
                    sendValue(document.getElementById("responsibleForm").name,document.getElementById("responsibleForm").email);

                }

            }
            checkField= function(ar){
                for (i = 0; i < ar.length; i++) {
                    if (ar[i].value==""){

                        var r = document.getElementById("warning");
                        if (r!=null){
                            document.body.removeChild(r);
                        }
                        var oNewP = document.createElement("p");
                        oNewP.setAttribute("style", "color: red");
                        oNewP.setAttribute("id", "warning");
                        var oText = document.createTextNode("You must insert both name and email of new responsible person.");
                        oNewP.appendChild(oText);
                        document.body.appendChild(oNewP);
                        
                        return false;
                    }
                }
            }
            document.getElementsByClassName = function(cl) {
                var retnode = [];
                var myclass = new RegExp('\\b'+cl+'\\b');
                var elem = this.getElementsByTagName('*');
                for (var i = 0; i < elem.length; i++) {
                    var classes = elem[i].className;
                    if (myclass.test(classes)) retnode.push(elem[i]);
                }
                return retnode;
            };
            function sendValue(nameInput,emailInput){
                var parameters = new Array();
                parameters['name']=nameInput.value;
                parameters['email']=emailInput.value;
                window.close();
                window.opener.handlePopupPrompt(parameters);
            }


        </script>
    </head>
    <body>
        <h2>New responsible</h2>
        <form method="POST" action="" id="responsibleForm">

            <li>Insert name:<input name="name" class="free"></li>

            <li>Insert email:<input name="email" class="free"></li>
            <input type=button value="Save" onClick="validateInputs();">
        </form>
    </body>
</html>
